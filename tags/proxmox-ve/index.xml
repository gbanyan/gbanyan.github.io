<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Proxmox VE on ä¸–ç•Œæ¨¹ä¸‹ï¼Œéœå¾·çˆ¾ä¹‹ç›®</title>
    <link>https://huyan.gbanyan.net/tags/proxmox-ve/</link>
    <description>Recent content in Proxmox VE on ä¸–ç•Œæ¨¹ä¸‹ï¼Œéœå¾·çˆ¾ä¹‹ç›®</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-tw</language>
    <lastBuildDate>Sun, 29 Jan 2023 18:46:18 +0800</lastBuildDate><atom:link href="https://huyan.gbanyan.net/tags/proxmox-ve/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>OPNsense åœ¨ Proxmox VE å…§å®‰è£ç­†è¨˜</title>
      <link>https://huyan.gbanyan.net/2023/01/opnsense-%E5%9C%A8-proxmox-ve-%E5%85%A7%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98/</link>
      <pubDate>Sun, 29 Jan 2023 18:46:18 +0800</pubDate>
      
      <guid>https://huyan.gbanyan.net/2023/01/opnsense-%E5%9C%A8-proxmox-ve-%E5%85%A7%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98/</guid>
      <description>å‰è¨€ æ›´æ›äº†è»Ÿè·¯ç”±ç¡¬é«”æ•…é †ä¾¿æ›´æ–°äº†ç­†è¨˜ æ­¤ç¯‡ç¹¼æ‰¿äº† Proxmox VE + PfSense å®‰è£ åœ¨ Proxmox VE å…§çš„ç¶²è·¯å®‰è£æ¶æ§‹ä»ç„¶é¡ä¼¼ï¼Œçš†æ¡ç”¨åŠè™›æ“¬åŒ–ç¶²å¡ Virtio Net çš„æ¶æ§‹ ç¶“éæ¸¬è©¦ï¼ŒIntel J4125 æ­é… Intel i225v ç¶²å¡ï¼Œ ä¸ç”¨è¨­å®šç¶²å¡ç›´é€šï¼Œä¹Ÿå¯ä»¥è·‘æ»¿ 300M / 100M æ›´æ›æˆ OPNsense åŸå› æœ‰ä»¥ä¸‹è€ƒé‡ï¼š PfSense éœ€è¦è¨‚é–± (PfSense Plus) æ‰æœƒç²å¾—è¼ƒç©æ¥µçš„æ›´æ–°ï¼Œé›–ç„¶å€‹äººç”¨æˆ¶ç›®å‰å…è²»ï¼Œä½†ä¸æ’é™¤æœªä¾†éœ€ä»˜è²»å¯èƒ½ OPNsense çš„æ›´æ–°ç­–ç•¥è¼ƒç‚ºç©æ¥µï¼Œå®‰å…¨æ€§æ›´æ–°é€±æœŸè¼ƒçŸ­ å¯å®‰è£ Zenarmor ä»¥åŠå…¶ä»–ç¬¬ä¸‰æ–¹å¥—ä»¶ä¾†æºï¼Œé›–ç„¶å¾Œé¢é‚„æ˜¯æŠŠ Zenarmor ç§»é™¤äº† OPNsense çš„ UI æ¯”è¼ƒäººæ€§åŒ–ä¸€äº›ï¼Œå¯ä»¥å–„ç”¨æœå°‹å¿«é€Ÿè·³åˆ°è‡ªå·±æƒ³è¦çš„è¨­å®šæ¬„ä½ åˆå§‹å®‰è£ Installation Assign the Port vmbr0 to WAN and vmbr1 to LAN (åƒè¦‹ PfSense ç­†è¨˜å…§åœ–ç‰‡) Skip the lagg and vlan configuration Default account and password for enter installation account: installer pass; opnsense Proxmox VE å…§ VM çš„è¨­å®š machine type: Q35 processors type: host OS type: other å…¶ä»– CPU, memory è¦–éœ€æ±‚èª¿æ•´ è¨­å®š Configuration PPPoE settings with IPv6 (é©ç”¨ Hinet) Fill out PPPoE info to establish connection Tick &amp;ldquo;Use IPv4 connectivity option&amp;rdquo; at LAN IPv6 section, IPv6 configuration type -&amp;gt; Track Interface, and the options below interface select &amp;ldquo;WAN&amp;rdquo; In the Firewall options, Tick &amp;ldquo;allow IPv6&amp;rdquo; Add IPv6 ICMP allow rule in WAN firewall rule å¦‚æœæƒ³æŒ‡å®šè‡ªæ¶çš„ DNS (Adguard Home or Pi-Hole) ä¸”æƒ³è¦æ‡‰ç”¨åˆ° IPv6: Tick the &amp;ldquo;Manual Router announcement management&amp;rdquo; Fill the DNS IPv4 settings in the &amp;ldquo;Router announcement&amp;rdquo; Hinet IPv6 is Stateless (Stateless DHCPv6 + SLAAC) Disable the DHCPv6 service in the LAN é€™æ¨£åšçš„é‚è¼¯æ˜¯ï¼ŒIPv6 DNS å¯ä»¥åªå‘ IPv4 ä½å€çš„ DNS ä¼ºæœå™¨è«‹æ±‚ï¼Œé‚„æ˜¯æœƒå›å‚³ IPv6 çš„è§£æä½å€ å®‰å…¨æ€§è¨­å®š Security System Disable the listen service including WebUI, ssh, Unbound on WAN surface Install the CrowdSec, and enable Intrusion Detection Disable hardware net acceleration related &amp;ldquo;Interfaces&amp;rdquo; &amp;gt; &amp;ldquo;Settings&amp;rdquo; Configure the SSH Key, disable the password login Intrusion Detection (Suricata) (IPS/IDS) Download rule sets based on service used Rule set with using sites name (p2p, Facebook, Youtube) do not apply ET Pro rule set need suscription Crowdesc Connected to the cloud database to detect the attackers IPs and block Collection for different scenarios (windows, nginx, &amp;hellip;)can only be added through shell command The hub for adding the scenario rule Hub | Firehol IP list subscription FireHOL Block List ( Botnets, Attacks, Malware&amp;hellip;.</description>
      <content:encoded><![CDATA[<ul>
<li>
<h2 id="å‰è¨€">å‰è¨€</h2>
<ul>
<li>æ›´æ›äº†è»Ÿè·¯ç”±ç¡¬é«”æ•…é †ä¾¿æ›´æ–°äº†ç­†è¨˜</li>
<li>æ­¤ç¯‡ç¹¼æ‰¿äº† <a href="https://huyan.gbanyan.net/2022/08/proxmox-ve--pfsense-%E5%AE%89%E8%A3%9D/">Proxmox VE + PfSense å®‰è£</a>
<ul>
<li>åœ¨ Proxmox VE å…§çš„ç¶²è·¯å®‰è£æ¶æ§‹ä»ç„¶é¡ä¼¼ï¼Œçš†æ¡ç”¨åŠè™›æ“¬åŒ–ç¶²å¡ Virtio Net çš„æ¶æ§‹</li>
<li>ç¶“éæ¸¬è©¦ï¼ŒIntel J4125 æ­é… Intel i225v ç¶²å¡ï¼Œ ä¸ç”¨è¨­å®šç¶²å¡ç›´é€šï¼Œä¹Ÿå¯ä»¥è·‘æ»¿ 300M / 100M</li>
</ul>
</li>
<li>æ›´æ›æˆ OPNsense åŸå› æœ‰ä»¥ä¸‹è€ƒé‡ï¼š
<ul>
<li>PfSense éœ€è¦è¨‚é–± (PfSense Plus) æ‰æœƒç²å¾—è¼ƒç©æ¥µçš„æ›´æ–°ï¼Œé›–ç„¶å€‹äººç”¨æˆ¶ç›®å‰å…è²»ï¼Œä½†ä¸æ’é™¤æœªä¾†éœ€ä»˜è²»å¯èƒ½</li>
<li>OPNsense çš„æ›´æ–°ç­–ç•¥è¼ƒç‚ºç©æ¥µï¼Œå®‰å…¨æ€§æ›´æ–°é€±æœŸè¼ƒçŸ­</li>
<li>å¯å®‰è£ Zenarmor ä»¥åŠå…¶ä»–ç¬¬ä¸‰æ–¹å¥—ä»¶ä¾†æºï¼Œé›–ç„¶å¾Œé¢é‚„æ˜¯æŠŠ Zenarmor ç§»é™¤äº†</li>
<li>OPNsense çš„ UI æ¯”è¼ƒäººæ€§åŒ–ä¸€äº›ï¼Œå¯ä»¥å–„ç”¨æœå°‹å¿«é€Ÿè·³åˆ°è‡ªå·±æƒ³è¦çš„è¨­å®šæ¬„ä½</li>
</ul>
</li>
</ul>
</li>
<li>
<h2 id="åˆå§‹å®‰è£-installation">åˆå§‹å®‰è£ Installation</h2>
<ul>
<li>Assign the Port vmbr0 to WAN and vmbr1 to LAN (åƒè¦‹ PfSense ç­†è¨˜å…§åœ–ç‰‡)</li>
<li>Skip the lagg and vlan configuration</li>
<li>Default account and password for enter installation
<ul>
<li>account: installer</li>
<li>pass; opnsense</li>
</ul>
</li>
<li>Proxmox VE å…§ VM çš„è¨­å®š
<ul>
<li>machine type: Q35</li>
<li>processors type: host</li>
<li>OS type: other</li>
<li>å…¶ä»– CPU, memory è¦–éœ€æ±‚èª¿æ•´</li>
</ul>
</li>
</ul>
</li>
<li>
<h2 id="è¨­å®š-configuration">è¨­å®š Configuration</h2>
<ul>
<li>
<h3 id="pppoe-settings-with-ipv6--é©ç”¨-hinet">PPPoE settings with IPv6  (é©ç”¨ Hinet)</h3>
<ul>
<li>Fill out PPPoE info to establish connection</li>
<li>Tick &ldquo;Use IPv4 connectivity option&rdquo;</li>
<li>at LAN IPv6 section, IPv6 configuration type -&gt; Track Interface, and the options below interface select &ldquo;WAN&rdquo;</li>
<li>In the Firewall options, Tick &ldquo;allow IPv6&rdquo;</li>
<li>Add IPv6 ICMP allow rule in WAN firewall rule</li>
<li>å¦‚æœæƒ³æŒ‡å®šè‡ªæ¶çš„ DNS (Adguard Home or Pi-Hole) ä¸”æƒ³è¦æ‡‰ç”¨åˆ° IPv6:
<ul>
<li>Tick the &ldquo;Manual Router announcement management&rdquo;</li>
<li>Fill the DNS IPv4 settings in the &ldquo;Router announcement&rdquo;</li>
<li>Hinet IPv6 is Stateless (Stateless DHCPv6 + SLAAC)</li>
<li>Disable the DHCPv6 service in the LAN</li>
<li>é€™æ¨£åšçš„é‚è¼¯æ˜¯ï¼ŒIPv6 DNS å¯ä»¥åªå‘ IPv4 ä½å€çš„ DNS ä¼ºæœå™¨è«‹æ±‚ï¼Œé‚„æ˜¯æœƒå›å‚³ IPv6 çš„è§£æä½å€</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="å®‰å…¨æ€§è¨­å®š-security">å®‰å…¨æ€§è¨­å®š Security</h3>
<ul>
<li>
<h4 id="system">System</h4>
<ul>
<li>Disable the listen service including WebUI, ssh, Unbound on WAN surface</li>
<li>Install the CrowdSec, and enable Intrusion Detection
<ul>
<li>Disable hardware net acceleration related &ldquo;Interfaces&rdquo; &gt; &ldquo;Settings&rdquo;</li>
</ul>
</li>
<li>Configure the SSH Key, disable the password login</li>
</ul>
</li>
<li>
<h4 id="intrusion-detection-suricata--ipsids">Intrusion Detection (Suricata)  (IPS/IDS)</h4>
<ul>
<li>Download rule sets based on service used</li>
<li>Rule set with using sites name (p2p, Facebook, Youtube) do not apply</li>
<li>ET Pro rule set need suscription</li>
</ul>
</li>
<li>
<h4 id="crowdesc">Crowdesc</h4>
<ul>
<li>Connected to the cloud database to detect the attackers IPs and block</li>
<li>Collection for different scenarios (windows, nginx, &hellip;)can only be added through shell command</li>
<li>The hub for adding the scenario rule <a href="https://hub.crowdsec.net">Hub |</a></li>
</ul>
</li>
<li>
<h4 id="firehol-ip-list-subscription">Firehol IP list subscription</h4>
<ul>
<li><a href="https://forum.opnsense.org/index.php?topic=17596.0">FireHOL Block List ( Botnets, Attacks, Malware&hellip;.)</a></li>
<li>Follow the guide to add alias of Firehol level 2</li>
<li>Add the Cron tab to update the Firewall alias</li>
</ul>
</li>
<li>
<h4 id="vlan-configuration--é©ç”¨æ–¼å»ºç«‹è¨ªå®¢ç¶²è·¯æˆ–è€…-iot-å°ˆç”¨ç¶²è·¯">VLAN Configuration  (é©ç”¨æ–¼å»ºç«‹è¨ªå®¢ç¶²è·¯æˆ–è€… IoT å°ˆç”¨ç¶²è·¯)</h4>
<ul>
<li>Add VLAN, assign Tag, and make Proxmox VE vtnet aware vlan</li>
<li>Assign DHCP server</li>
<li>Add Firewall rule to make the VLAN network unable to access the LAN</li>
</ul>
</li>
<li>
<h4 id="geoip-and-ailases-for-firewall-block--å¦‚æœæƒ³æ“‹ç‰¹å®šå€åŸŸåœ‹å®¶çš„è©±">GeoIP and Ailases for Firewall Block  (å¦‚æœæƒ³æ“‹ç‰¹å®šå€åŸŸåœ‹å®¶çš„è©±)</h4>
<ul>
<li>Register the Maxmind GeoIP database</li>
<li>Follow the guide to add Firewall aliases</li>
<li>Configure to block the specific countries</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="cron-å®‰å…¨æ€§è¨­å®šå®Œæˆå¾Œè¨˜å¾—è¨­å®šå„åˆ—è¡¨çš„æ›´æ–°">Cron (å®‰å…¨æ€§è¨­å®šå®Œæˆå¾Œï¼Œè¨˜å¾—è¨­å®šå„åˆ—è¡¨çš„æ›´æ–°)</h3>
<ul>
<li>System and packages update</li>
<li>Suricata blocklist update</li>
<li>Firewall aliases updates (FireHol, GeoIP)</li>
</ul>
</li>
<li>
<h3 id="others-packages">Others Packages</h3>
<ul>
<li>Netdata: å¦å¤–ä¸€ç¨®ç›£æ§æœå‹™</li>
<li>Wake-On-LAN: é ç«¯å–šé†’æ©Ÿå™¨ç”¨</li>
<li>UPNP: æœ‰å®‰å…¨ç–‘æ…®è€…æ…ç”¨ï¼Œçµ¦ LAN å…§æœå‹™æ‰“æ´ç”¨çš„</li>
<li>Tailscale <a href="https://pfschina.org/wp/?p=9163">OPNsenseå®‰è£…é…ç½®Tailscale | éµè¡€ç”·å…’çš„BLOG</a></li>
<li>Wireguard <a href="https://www.wundertech.net/how-to-set-up-wireguard-in-opnsense/">How to Set Up WireGuard in OPNsense in 2023 - WunderTech</a></li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Proxmox VE &#43; PfSense å®‰è£</title>
      <link>https://huyan.gbanyan.net/2022/08/proxmox-ve--pfsense-%E5%AE%89%E8%A3%9D/</link>
      <pubDate>Sat, 20 Aug 2022 13:11:49 +0800</pubDate>
      
      <guid>https://huyan.gbanyan.net/2022/08/proxmox-ve--pfsense-%E5%AE%89%E8%A3%9D/</guid>
      <description>å‰è¨€ å®¶ä¸­çš„è»Ÿè·¯ç”±æ©Ÿå™¨æœ¬åªæœ‰å®‰è£ OpenWRT, ä¹Ÿç¨±è·åœ°å·¥ä½œäº†ä¸€æ®µæ™‚é–“ã€‚å¶ç„¶æ³¨æ„åˆ°ï¼Œç¶²è·¯é«˜è² è¼‰çš„æƒ…æ³ä¸‹ï¼Œè¨˜æ†¶é«”ä½”ç”¨ä¹Ÿæ‰åƒ… 8GB è¨˜æ†¶é«”çš„ 1% è€Œå·²ã€‚ç¡¬é«”è³‡æºä¸¦æ²’æœ‰å¥½å¥½è¢«å¦¥å–„ä½¿ç”¨ï¼Œå·¥ç¨‹é­‚å°±ç‡ƒç‡’èµ·ä¾†æƒ³æ¦¨ä¹¾ä»–ã€‚
ä¸€ç¨®æ¨è–¦é…ç½®æ˜¯å®‰è£ Proxmox VE ç’°å¢ƒï¼Œå†è™›æ“¬åŒ– Router è»Ÿé«”ï¼Œå‰©ä¸‹çš„è³‡æºå°±å¯ä»¥å®‰è£å…¶ä»–å®¢é«”ä½œæ¥­ç³»çµ±å¦‚ Windows, Linux, æˆ–è€…å†è£ docker æœå‹™ã€‚
Proxmox VE å®‰è£ pfSense å®‰è£ Proxmox æœ¬èº«çš„éç¨‹è »ç°¡å–®ï¼Œä¸‹è¼‰ ISO æª”ï¼Œç‡’éŒ„åˆ° USB éš¨èº«ç¢Ÿï¼Œå•Ÿå‹•ä¸€æ­¥ä¸€æ­¥å®‰è£å³å¯ã€‚åœ¨é«˜æª”ç¡¬é«”é…ç½®çš„é‡å‹ä¼ºæœå™¨ï¼Œé‚„å¯ä»¥è€ƒæ…® ZFS æª”æ¡ˆç³»çµ±ï¼Œä¸éåªæ˜¯ä¸€å°è»Ÿè·¯ç”±å°ä¸»æ©Ÿå°±ä¸€åˆ‡å¾ç°¡ã€‚
ä¸‹è¼‰ pfSense iso æª”ï¼Œä¸Šå‚³åˆ° Proxmox VEï¼Œå°±å¯ä»¥å®‰è£äº†ã€‚pfSense çš„å®‰è£ä¹Ÿæœ‰ä¸å°‘æ•™å­¸æ–‡ï¼Œç”šè‡³å®˜æ–¹ä¹Ÿæœ‰èªªæ˜æ–‡ä»¶(Virtualizing with ProxmoxÂ® VE)ã€‚ä»¥ä¸‹åƒ…è¨è«–å€‹äººéœ€æ±‚å’Œæ¶è¨­éç¨‹ä¸­çš„å•é¡Œã€‚
é è¨ˆæ¶æ§‹ è»Ÿè·¯ç”±æ©Ÿå™¨æœ‰å››å€‹å¯¦é«”ç¶²è·¯å­”, enp1s0, enp2s0, enp3s0, enp4s0 ç¬¬ä¸€å€‹ç•¶ä½œ WAN å­”ï¼Œå…¶é¤˜ä¸‰å­”ä½œç‚º LAN å­” Proxmox VE å¯ä»¥é€é LAN å­”å­˜å– Proxmox VE ä¹‹ä¸‹è™›æ“¬åŒ–çš„ pfSense ä½œç‚º Router ä½¿ç”¨ï¼Œé€é WAN é€²è¡Œ PPPoE æ’¥è™Ÿ å®¶ä¸­å…¶é¤˜ç¶²è·¯è¨­å‚™é€é LAN å¾—åˆ°ç¶²è·¯å­˜å– å•é¡Œé» ä¸€é–‹å§‹ Proxmox VE å·²ç¶“å»ºç«‹ä¸€å€‹ Linux Bridge, ç‚º vmbr0, é—œè¯åˆ° enp1s0, ä¸¦å·²æŒ‡æ´¾åŸå…ˆè¨­å®šçš„ IP 192.</description>
      <content:encoded><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å®¶ä¸­çš„è»Ÿè·¯ç”±æ©Ÿå™¨æœ¬åªæœ‰å®‰è£ OpenWRT, ä¹Ÿç¨±è·åœ°å·¥ä½œäº†ä¸€æ®µæ™‚é–“ã€‚å¶ç„¶æ³¨æ„åˆ°ï¼Œç¶²è·¯é«˜è² è¼‰çš„æƒ…æ³ä¸‹ï¼Œè¨˜æ†¶é«”ä½”ç”¨ä¹Ÿæ‰åƒ… 8GB è¨˜æ†¶é«”çš„ 1% è€Œå·²ã€‚ç¡¬é«”è³‡æºä¸¦æ²’æœ‰å¥½å¥½è¢«å¦¥å–„ä½¿ç”¨ï¼Œå·¥ç¨‹é­‚å°±ç‡ƒç‡’èµ·ä¾†æƒ³æ¦¨ä¹¾ä»–ã€‚</p>
<p>ä¸€ç¨®æ¨è–¦é…ç½®æ˜¯å®‰è£ Proxmox VE ç’°å¢ƒï¼Œå†è™›æ“¬åŒ– Router è»Ÿé«”ï¼Œå‰©ä¸‹çš„è³‡æºå°±å¯ä»¥å®‰è£å…¶ä»–å®¢é«”ä½œæ¥­ç³»çµ±å¦‚ Windows, Linux, æˆ–è€…å†è£ docker æœå‹™ã€‚</p>
<h2 id="proxmox-ve-å®‰è£-pfsense">Proxmox VE å®‰è£ pfSense</h2>
<p>å®‰è£ Proxmox æœ¬èº«çš„éç¨‹è »ç°¡å–®ï¼Œä¸‹è¼‰ ISO æª”ï¼Œç‡’éŒ„åˆ° USB éš¨èº«ç¢Ÿï¼Œå•Ÿå‹•ä¸€æ­¥ä¸€æ­¥å®‰è£å³å¯ã€‚åœ¨é«˜æª”ç¡¬é«”é…ç½®çš„é‡å‹ä¼ºæœå™¨ï¼Œé‚„å¯ä»¥è€ƒæ…® ZFS æª”æ¡ˆç³»çµ±ï¼Œä¸éåªæ˜¯ä¸€å°è»Ÿè·¯ç”±å°ä¸»æ©Ÿå°±ä¸€åˆ‡å¾ç°¡ã€‚</p>
<p>ä¸‹è¼‰ pfSense iso æª”ï¼Œä¸Šå‚³åˆ° Proxmox VEï¼Œå°±å¯ä»¥å®‰è£äº†ã€‚pfSense çš„å®‰è£ä¹Ÿæœ‰ä¸å°‘æ•™å­¸æ–‡ï¼Œç”šè‡³å®˜æ–¹ä¹Ÿæœ‰<a href="https://docs.netgate.com/pfsense/en/latest/recipes/virtualize-proxmox-ve.html">èªªæ˜æ–‡ä»¶(Virtualizing with ProxmoxÂ® VE)</a>ã€‚ä»¥ä¸‹åƒ…è¨è«–å€‹äººéœ€æ±‚å’Œæ¶è¨­éç¨‹ä¸­çš„å•é¡Œã€‚</p>
<h3 id="é è¨ˆæ¶æ§‹">é è¨ˆæ¶æ§‹</h3>
<ul>
<li>è»Ÿè·¯ç”±æ©Ÿå™¨æœ‰å››å€‹å¯¦é«”ç¶²è·¯å­”, enp1s0, enp2s0, enp3s0, enp4s0</li>
<li>ç¬¬ä¸€å€‹ç•¶ä½œ WAN å­”ï¼Œå…¶é¤˜ä¸‰å­”ä½œç‚º LAN å­”</li>
<li>Proxmox VE å¯ä»¥é€é LAN å­”å­˜å–</li>
<li>Proxmox VE ä¹‹ä¸‹è™›æ“¬åŒ–çš„ pfSense ä½œç‚º Router ä½¿ç”¨ï¼Œé€é WAN é€²è¡Œ PPPoE æ’¥è™Ÿ</li>
<li>å®¶ä¸­å…¶é¤˜ç¶²è·¯è¨­å‚™é€é LAN å¾—åˆ°ç¶²è·¯å­˜å–</li>
</ul>
<h3 id="å•é¡Œé»">å•é¡Œé»</h3>
<ul>
<li>ä¸€é–‹å§‹ Proxmox VE å·²ç¶“å»ºç«‹ä¸€å€‹ Linux Bridge, ç‚º vmbr0, é—œè¯åˆ° enp1s0, ä¸¦å·²æŒ‡æ´¾åŸå…ˆè¨­å®šçš„ IP 192.168.100.2</li>
<li>é›»è…¦ç«¯åªèƒ½é€éç·šè·¯é€£æ¥åˆ° enp1s0 é€²è¡Œ Proxmox VE çš„è¨­å®š</li>
<li>å°‡å…¶ä»–å¯¦é«”ç¶²è·¯æ¥å­” enp2s0, enp3s0, enp4s0 é—œè¯åˆ° vmbr1</li>
<li>Pfsense æ¶è¨­å®Œæˆä»¥å¾Œï¼Œå¯ä»¥é€é vmbr0 æŒ‡å®šåˆ° WAN, vmbr1 æŒ‡å®šåˆ° LANï¼Œæ­£å¸¸é€²è¡Œç¶²è·¯æ’¥æ¥åŠå€åŸŸç¶²è·¯åˆ†æ´¾ã€‚ä½†æ­¤ä¸€ç’°å¢ƒç›´æ¥æ‹¿å»ä½¿ç”¨ï¼Œç„¡æ³•å¾ä»»ä½•å·²ç¶“é€£çµåˆ° LAN çš„æ©Ÿå™¨é€²å…¥ Proxmox VE ç®¡ç†ä»‹é¢</li>
<li>æ¥çºŒä¸Šè¿°ï¼Œå¦‚æœè¦é€²è¡Œ Proxmox VE çš„ç®¡ç†ï¼Œè¦æ•´å°æ©Ÿå™¨æ‹¿ä¸‹ä¾†ï¼Œé€é enp1s0 é€²è¡Œé€£æ¥ï¼Œååˆ†ä¸ä¾¿</li>
</ul>
<h3 id="è§£æ±ºæ–¹æ³•">è§£æ±ºæ–¹æ³•</h3>
<p>ç¶“éç ”ç©¶åŠå¤©ï¼Œé‚„æ›¾ç¶“ä¸€åº¦æåˆ°ä¸­é€”æ–·é›»è¨­å®šé»¨æ•´å€‹ä¸Ÿæ‰ç„¡æ³•é–‹æ©Ÿçš„çª˜æ³ï¼Œè¦é‡çŒ Proxmox VE çš„ç‹€æ³ï¼Œç¸½ç®—æå®šäº†â€¦ ğŸ¤·â€â™‚ï¸</p>
<ul>
<li>å–æ¶ˆ vmbr0 çš„ é è¨­ IP èˆ‡ Gatewayï¼Œæ”¹è¨­åˆ° vmbr1</li>
<li>æŒ‡æ´¾ vmbr1 çš„ IP è¨­å®šåˆ°èˆ‡ Pfsense LAN åŒä¸€ç¶²æ®µ, Gateway æŒ‡å‘ Pfeense 192.168.1.1
<ul>
<li>pfSense é è¨­çš„ DHCP range ç‚º 192.168.1.100 ~</li>
</ul>
</li>
</ul>
<p>é€™æ¨£å°±å¯ä»¥é€é Pfsense çš„ LAN å­”å­˜å– Proxmox VE äº†</p>
<p><img loading="lazy" src="/images/ProxmoxVE_network.png" alt=""  />
</p>
<p><img loading="lazy" src="/images/Proxmox.drawio.png" alt=""  />
</p>
<h3 id="æ½›åœ¨å•é¡Œ">æ½›åœ¨å•é¡Œ</h3>
<ul>
<li>Proxmox VE ä¸»æ©Ÿå¿…é ˆè¦é€é pfSenese æ‰èƒ½é€£åˆ°å¤–ç¶²</li>
<li>pfSense ä¸€æ—¦æ›æ‰ ã€é·ç§»ä¸­åœæ­¢ã€ æˆ–å…¶ä»–ç¶­è­·ç­‰å› ç´ ï¼Œæ‰€æœ‰è£ç½®åŒ…å« Proxmox VE ä¸»æ©Ÿå°±æœ‰å¯èƒ½ç„¡æ³•é€£ç·š</li>
</ul>
<h2 id="pfsense-vs-openwrt">pfSense vs OpenWRT</h2>
<p>ä»¥ç”¢å“ç›®æ¨™ä¾†äº†è§£ç™¼å±•è„ˆçµ¡ï¼Œä¸ä¸€å®šè¦åµè¨è«–ç‰¹å®šç”¨é€”åŸ·å„ªåŸ·åŠ£</p>
<h3 id="pfsense">pfSense</h3>
<ul>
<li>FreeBSD ç‚ºåŸºåº•ï¼Œä»¥å°ˆæ¥­é˜²ç«ç‰†ç›®æ¨™ç‚ºè¨­è¨ˆ</li>
<li>é˜²ç«ç‰†ç®¡ç†åŠŸèƒ½ä¸€æ‡‰ä¿±å…¨ï¼Œç®¡ç†ç›£æ¸¬åŠŸèƒ½å®Œæ•´</li>
<li>ä½¿ç”¨è€…ä»‹é¢æ¢ç†åˆ†æ˜ï¼Œèªªæ˜æ–‡å­—æ¸…æ¥š</li>
<li>Netgate å…¬å¸æä¾›å•†æ¥­ä»˜è²»æ”¯æ´ï¼Œå®Œå–„çš„èªªæ˜æ–‡ä»¶ï¼Œä¸”æœ‰å„æ‡‰ç”¨å ´æ™¯ scene çš„ç›¸å°æ‡‰åƒè€ƒæ–‡ä»¶</li>
</ul>
<h3 id="openwrt">OpenWRT</h3>
<ul>
<li>Linux ç‚ºåŸºç¤ï¼Œä»¥å°å‹åµŒå…¥å¼è£ç½®ç‚ºå°å‘ï¼Œé©åˆç¡¬é«”è³‡æºç›¸å°ä½çš„å®¶ç”¨ç„¡ç·šè·¯ç”±å™¨</li>
<li>å°å‹è¼•é‡ï¼Œé™¤åŸºæœ¬åŠŸèƒ½å¤–ï¼Œå¯ä»¥è‡ªè¡Œé€é opkg å®‰è£ç¤¾ç¾¤ç¶­è­·çš„å¥—ä»¶</li>
<li>ä¹Ÿæœ‰èªªæ˜æ–‡ä»¶ï¼Œä½†æ˜¯æ²’æœ‰åƒ Netgate ç‚º pfSense ç¶­è­·çš„æ–‡ä»¶é‚£éº¼ä½¿ç”¨è€…å°å‘
<ul>
<li>ç¶²è·¯ç›¸é—œåŸºç¤çŸ¥è­˜æ‰èƒ½ç†è§£ï¼Œæˆ–æœªæä¾›ç´°ç¯€èªªæ˜ï¼Œéœ€å°‹æ‰¾æ›´å¤šè¨è«–æ–‡ç« ä»¥å°‹æ±‚è§£ç­”</li>
<li>è¨è«–æ–‡ç« ä¹Ÿä¸ä¸€å®šæä¾›æ­£ç¢ºç­”æ¡ˆï¼Œéœ€ä»°è³´è‡ªå·±æ‘¸ç´¢ã€‚</li>
</ul>
</li>
</ul>
<p>æˆ‘è¦ºå¾—å…©å€‹ç³»çµ±éƒ½å¾ˆå„ªç§€ï¼Œå¦‚æœæ˜¯ä¸€å°ç„¡ç·šè·¯ç”±å™¨æˆ–ç¡¬é«”é…ç½®å¾ˆä½çš„æ©Ÿå™¨è¦æ”¹è£ï¼Œæˆ‘æœƒå„ªå…ˆé¸æ“‡ OpenWRTã€‚ä½†æ˜¯åƒå››æ ¸å¿ƒ J1900 CPU, è¨˜æ†¶é«”è£åˆ° 8G çš„æ©Ÿå™¨ï¼Œå°±æœƒè€ƒæ…®è£ pfSense ä¾†ç©ç©ã€‚</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://www.jkg.tw/p1464/">åœ¨ UniFi Controller 5.9.29 å•Ÿç”¨ä¸­è¯é›»ä¿¡éå›ºå®šåˆ¶ IPv6 æœå‹™</a></li>
<li><a href="https://pfschina.org/wp/?p=6505#IPv4%E6%8A%91%E5%88%B6%E5%88%97%E8%A1%A8">pfBlockerNGè®¾ç½®æŒ‡å— | éµè¡€ç”·å…’çš„BLOG</a></li>
<li><a href="https://pfschina.org/wp/?p=6686">pfSenseå®‰è£…AdGuardHome | éµè¡€ç”·å…’çš„BLOG</a></li>
</ul>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
